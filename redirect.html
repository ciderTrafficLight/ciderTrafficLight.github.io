<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      function error(){
        document.getElementsByTagName('h1')[0].innerHTML = '<h1 style="background-color: #ff0000;">転送できません。転送設定が間違っているか、転送先のページが見つかりません</h1>'
      }
      const main = () => {
      console.log('redirecting...')
      var query = location.search
      console.log(query)
        if(query = null){
          console.log('error')
          document.write('error')
        } else{
      try{
        query = query.replace('?url=', '')
      }catch(e){
        error()
      }
      console.log('redirecting...')
      location.href = 'https://cidertrafficlight.github.io' + query
      }
      }
      setInterval(main, 1000)
      const display= () => {
        var h1 = document.getElementById('h1')
        h1 = h1.replace('redirecting', '')
        h1 = h1.length
        if(h1!==3){
          h1.innerHTML = 'redirecting'
        } else {
          h1.innerHTML += '.'
        }
      }
      setInterval(display, '300')
    </script>
  </head>
  <body>
    <h1 id="h1">redirecting</h1>
  </body>
</html>
